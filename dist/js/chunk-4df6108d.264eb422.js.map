{"version":3,"sources":["webpack:///./src/components/action-buttons.vue?1a4a","webpack:///src/components/action-buttons.vue","webpack:///./src/components/action-buttons.vue?8f71","webpack:///./src/components/action-buttons.vue","webpack:///./src/components/entries.vue?0652","webpack:///src/components/entries.vue","webpack:///./src/components/entries.vue?2b3b","webpack:///./src/components/entries.vue","webpack:///./src/views/Bills.vue?12f1","webpack:///src/views/Bills.vue","webpack:///./src/views/Bills.vue?c19a","webpack:///./src/views/Bills.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","removeItem","storeName","itemId","_v","editItem","fieldsForEdit","staticRenderFns","name","props","mixins","component","compareItems","length","getFilteredItems","_s","header","fields","items","compareFields","computed","filter","getFilteredAcctPos","getOpDateOptions","model","value","callback","$$v","selectedOpDate","expression","addItem","onRowSelected","scopedSlots","_u","key","fn","scope","_l","field","style","width","data","item","id","selectedEntry","entryFields","getOpEntry","components","Entries","ActionButtons","getAcctPos","reduce","acc","some","push","watch","setDefaultOpDateSelected","methods","slice","OpDate"],"mappings":"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","file":"js/chunk-4df6108d.264eb422.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-end\"},[_c('b-button',{staticClass:\"mx-1\",attrs:{\"variant\":\"danger\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.removeItem(_vm.storeName, _vm.itemId)}}},[_vm._v(\"Удалить\")]),_c('b-button',{staticClass:\"mx-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.editItem(_vm.storeName, _vm.itemId, _vm.fieldsForEdit)}}},[_vm._v(\"Редактировать\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"text-end\">\r\n    <b-button\r\n      variant=\"danger\"\r\n      size=\"sm\"\r\n      class=\"mx-1\"\r\n      @click=\"removeItem(storeName, itemId)\"\r\n    >Удалить</b-button>\r\n\r\n    <b-button\r\n      variant=\"primary\"\r\n      size=\"sm\"\r\n      class=\"mx-1\"\r\n      @click=\"editItem(storeName, itemId, fieldsForEdit)\"\r\n    >Редактировать</b-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MixinsLocals from \"@/mixins/locals\"\r\nexport default {\r\n  name: \"ActionButtons\",\r\n  props: {\r\n    storeName: { type: String, default: \"\" },\r\n    itemId: { type: [Number, String], default: \"\" },\r\n    fieldsForEdit: { type: [Array], default: () => [] },\r\n  },\r\n  mixins: [ MixinsLocals ],\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./action-buttons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./action-buttons.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./action-buttons.vue?vue&type=template&id=02513a7c&\"\nimport script from \"./action-buttons.vue?vue&type=script&lang=js&\"\nexport * from \"./action-buttons.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.compareItems.length)?[_c('h6',{staticClass:\"text-center\"},[_vm._v(\"Выберите запись...\")])]:(!_vm.getFilteredItems.length)?[_c('h6',{staticClass:\"text-center\"},[_vm._v(\"Нет данных по выбранному записи...\")])]:[_c('h2',{staticClass:\"mb-3\"},[_vm._v(_vm._s(_vm.header))]),_c('b-table',{attrs:{\"fields\":_vm.fields,\"items\":_vm.getFilteredItems}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <template v-if=\"!compareItems.length\">\r\n      <h6 class=\"text-center\">Выберите запись...</h6>\r\n    </template>\r\n    \r\n    <template v-else-if=\"!getFilteredItems.length\">\r\n      <h6 class=\"text-center\">Нет данных по выбранному записи...</h6>\r\n    </template>\r\n\r\n    <template v-else>\r\n      <h2 class=\"mb-3\">{{ header }}</h2>\r\n      \r\n      <b-table\r\n        :fields=\"fields\"\r\n        :items=\"getFilteredItems\"\r\n      />\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Entries\",\r\n  props: {\r\n    header: { type: String, default: \"Таблица данных\" },\r\n    items: { type: Array, default: () => [] },\r\n    fields: { type: Array, default: () => [] },\r\n    \r\n    // данные для сравнения \r\n    compareItems: { type: Array, default: () => [] },\r\n    compareFields: { type: Array, default: () => [] },\r\n  },\r\n\r\n  computed: {\r\n    getFilteredItems() {\r\n      return this.items.filter(\r\n        item => this.compareFields.some(\r\n          field => this.compareItems.includes(item[field])\r\n        )\r\n      )\r\n    },\r\n  },\r\n\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./entries.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./entries.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./entries.vue?vue&type=template&id=12e108ba&\"\nimport script from \"./entries.vue?vue&type=script&lang=js&\"\nexport * from \"./entries.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.getFilteredAcctPos.length)?[_c('h2',{staticClass:\"mb-3\"},[_vm._v(\"Счета с остатками на дату\")]),_c('div',{staticClass:\"d-flex\"},[_c('b-form-select',{attrs:{\"options\":_vm.getOpDateOptions,\"size\":\"sm\"},model:{value:(_vm.selectedOpDate),callback:function ($$v) {_vm.selectedOpDate=$$v},expression:\"selectedOpDate\"}}),_c('b-button',{staticClass:\"ml-auto\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.addItem('acctPos')}}},[_vm._v(\"Добавить запись\")])],1),_c('b-table',{staticClass:\"mb-5 mt-3\",attrs:{\"fields\":_vm.fields,\"items\":_vm.getFilteredAcctPos,\"select-mode\":\"single\",\"selectable\":\"\"},on:{\"row-selected\":function($event){return _vm.onRowSelected($event, [ 'AcctNum' ])}},scopedSlots:_vm._u([{key:\"table-colgroup\",fn:function(scope){return _vm._l((scope.fields),function(field){return _c('col',{key:field.key,style:({ \n            width: field.key === 'action' ? '230px' : '',\n          })})})}},{key:\"cell(action)\",fn:function(data){return [_c('action-buttons',{attrs:{\"store-name\":\"acctPos\",\"item-id\":data.item.id,\"fields-for-edit\":['AcctNum', 'Balance']}})]}}],null,false,923070043)}),_c('entries',{attrs:{\"header\":\"Проводки по счету\",\"compare-items\":_vm.selectedEntry,\"compare-fields\":['AcctNumCr', 'AcctNumDb'],\"fields\":_vm.entryFields,\"items\":_vm.getOpEntry}})]:[_c('h2',{staticClass:\"mb-3\"},[_vm._v(\"Нет данных\")])]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <template v-if=\"getFilteredAcctPos.length\">\r\n      <h2 class=\"mb-3\">Счета с остатками на дату</h2>\r\n\r\n      <div class=\"d-flex\">\r\n        <b-form-select\r\n          v-model=\"selectedOpDate\"\r\n          :options=\"getOpDateOptions\"\r\n          size=\"sm\"\r\n        />\r\n\r\n        <b-button\r\n          class=\"ml-auto\"\r\n          variant=\"primary\"\r\n          @click=\"addItem('acctPos')\"\r\n        >Добавить запись</b-button>\r\n      </div>\r\n\r\n      <b-table\r\n        :fields=\"fields\"\r\n        :items=\"getFilteredAcctPos\"\r\n        select-mode='single'\r\n        selectable\r\n        @row-selected=\"onRowSelected($event, [ 'AcctNum' ])\"\r\n        class=\"mb-5 mt-3\"\r\n      >\r\n        <template #table-colgroup=\"scope\">\r\n          <col\r\n            v-for=\"field in scope.fields\"\r\n            :key=\"field.key\"\r\n            :style=\"{ \r\n              width: field.key === 'action' ? '230px' : '',\r\n            }\"\r\n          >\r\n        </template>\r\n        <template #cell(action)=\"data\">\r\n          <action-buttons\r\n            store-name=\"acctPos\"\r\n            :item-id=\"data.item.id\"\r\n            :fields-for-edit=\"['AcctNum', 'Balance']\"\r\n          />\r\n        </template>\r\n      </b-table>\r\n\r\n      <entries\r\n        header=\"Проводки по счету\"\r\n        :compare-items=\"selectedEntry\"\r\n        :compare-fields=\"['AcctNumCr', 'AcctNumDb']\"\r\n        :fields=\"entryFields\"\r\n        :items=\"getOpEntry\"\r\n      />\r\n    </template>\r\n\r\n    <template v-else>\r\n      <h2 class=\"mb-3\">Нет данных</h2>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Entries from \"@/components/entries\"\r\nimport MixinsLocals from \"@/mixins/locals\"\r\nimport { mapGetters, mapActions } from \"vuex\"\r\nimport ActionButtons from '@/components/action-buttons'\r\nexport default {\r\n  name: \"Bills\",\r\n  components: {\r\n    Entries,\r\n    ActionButtons,\r\n  },\r\n  mixins: [ MixinsLocals ],\r\n  data() {\r\n    return {\r\n      fields: [\r\n        {\r\n          key: 'AcctNum',\r\n          label: 'Номер счета',\r\n        },\r\n        {\r\n          key: 'Balance',\r\n          label: 'Остаток',\r\n        },\r\n        {\r\n          key: 'action',\r\n          label: 'Действие',\r\n        },\r\n      ],\r\n\r\n      entryFields: [\r\n        {\r\n          key: 'OpDate',\r\n          label: 'Дата операционного дня',\r\n        },\r\n        {\r\n          key: 'AcctNumDb',\r\n          label: 'Счет дебета',\r\n        },\r\n        {\r\n          key: 'AcctNumCr',\r\n          label: 'Счет кредита',\r\n        },\r\n        {\r\n          key: 'Amount',\r\n          label: 'Сумма',\r\n        },\r\n      ],\r\n\r\n      selectedOpDate: null,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([ 'getOpEntry', 'getAcctPos' ]),\r\n\r\n    getOpDateOptions() {\r\n      return this.getAcctPos.reduce((acc, acct) => {\r\n\r\n        // убираем дублирование элементов для селектора\r\n        if (!acc.some(acctIn => acctIn.text == acct.OpDate)) {\r\n          acc.push({ value: acct.OpDate, text: acct.OpDate })\r\n        }\r\n\r\n        return acc\r\n      }, [])\r\n    },\r\n    \r\n    getFilteredAcctPos() {\r\n      return this.getAcctPos.filter(acct => acct.OpDate === this.selectedOpDate)\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    getOpEntry() {\r\n      this.setDefaultOpDateSelected()\r\n    },\r\n\r\n    getAcctPos() {\r\n      this.setDefaultOpDateSelected()\r\n    },\r\n  },\r\n\r\n  async created() {\r\n    await this.loadFile('acctPos')\r\n    await this.loadFile('opEntry')\r\n    \r\n    this.setDefaultOpDateSelected()\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([ 'loadFile' ]),\r\n\r\n    setDefaultOpDateSelected() {\r\n      // выбираем последний элемент в селекторе\r\n      if (this.getAcctPos.length) {\r\n        this.selectedOpDate = this.getAcctPos.slice(-1)[0].OpDate\r\n      }\r\n    },\r\n  },\r\n\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bills.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bills.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Bills.vue?vue&type=template&id=19fbc8cc&\"\nimport script from \"./Bills.vue?vue&type=script&lang=js&\"\nexport * from \"./Bills.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}