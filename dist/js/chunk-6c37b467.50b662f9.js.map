{"version":3,"sources":["webpack:///./src/components/action-buttons.vue?1a4a","webpack:///src/components/action-buttons.vue","webpack:///./src/components/action-buttons.vue?8f71","webpack:///./src/components/action-buttons.vue","webpack:///./src/components/entries.vue?0652","webpack:///src/components/entries.vue","webpack:///./src/components/entries.vue?2b3b","webpack:///./src/components/entries.vue","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/views/Operations.vue?c47b","webpack:///src/views/Operations.vue","webpack:///./src/views/Operations.vue?e4f3","webpack:///./src/views/Operations.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","removeItem","storeName","itemId","_v","editItem","fieldsForEdit","staticRenderFns","name","props","mixins","component","compareItems","length","getFilteredItems","_s","header","fields","items","compareFields","computed","filter","$","$findIndex","findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","target","proto","forced","callbackfn","arguments","undefined","getOpEntry","addItem","onRowSelected","scopedSlots","_u","key","fn","scope","_l","field","style","width","data","item","id","selectedEntry","entryFields","getFilteredEntryItems","components","Entries","ActionButtons","getAcctPos","reduce","itemInIndex","acc","Balance","push","methods"],"mappings":"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","file":"js/chunk-6c37b467.50b662f9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-end\"},[_c('b-button',{staticClass:\"mx-1\",attrs:{\"variant\":\"danger\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.removeItem(_vm.storeName, _vm.itemId)}}},[_vm._v(\"Удалить\")]),_c('b-button',{staticClass:\"mx-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.editItem(_vm.storeName, _vm.itemId, _vm.fieldsForEdit)}}},[_vm._v(\"Редактировать\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"text-end\">\r\n    <b-button\r\n      variant=\"danger\"\r\n      size=\"sm\"\r\n      class=\"mx-1\"\r\n      @click=\"removeItem(storeName, itemId)\"\r\n    >Удалить</b-button>\r\n\r\n    <b-button\r\n      variant=\"primary\"\r\n      size=\"sm\"\r\n      class=\"mx-1\"\r\n      @click=\"editItem(storeName, itemId, fieldsForEdit)\"\r\n    >Редактировать</b-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MixinsLocals from \"@/mixins/locals\"\r\nexport default {\r\n  name: \"ActionButtons\",\r\n  props: {\r\n    storeName: { type: String, default: \"\" },\r\n    itemId: { type: [Number, String], default: \"\" },\r\n    fieldsForEdit: { type: [Array], default: () => [] },\r\n  },\r\n  mixins: [ MixinsLocals ],\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./action-buttons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./action-buttons.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./action-buttons.vue?vue&type=template&id=02513a7c&\"\nimport script from \"./action-buttons.vue?vue&type=script&lang=js&\"\nexport * from \"./action-buttons.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.compareItems.length)?[_c('h6',{staticClass:\"text-center\"},[_vm._v(\"Выберите запись...\")])]:(!_vm.getFilteredItems.length)?[_c('h6',{staticClass:\"text-center\"},[_vm._v(\"Нет данных по выбранному записи...\")])]:[_c('h2',{staticClass:\"mb-3\"},[_vm._v(_vm._s(_vm.header))]),_c('b-table',{attrs:{\"fields\":_vm.fields,\"items\":_vm.getFilteredItems}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <template v-if=\"!compareItems.length\">\r\n      <h6 class=\"text-center\">Выберите запись...</h6>\r\n    </template>\r\n    \r\n    <template v-else-if=\"!getFilteredItems.length\">\r\n      <h6 class=\"text-center\">Нет данных по выбранному записи...</h6>\r\n    </template>\r\n\r\n    <template v-else>\r\n      <h2 class=\"mb-3\">{{ header }}</h2>\r\n      \r\n      <b-table\r\n        :fields=\"fields\"\r\n        :items=\"getFilteredItems\"\r\n      />\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Entries\",\r\n  props: {\r\n    header: { type: String, default: \"Таблица данных\" },\r\n    items: { type: Array, default: () => [] },\r\n    fields: { type: Array, default: () => [] },\r\n    \r\n    // данные для сравнения \r\n    compareItems: { type: Array, default: () => [] },\r\n    compareFields: { type: Array, default: () => [] },\r\n  },\r\n\r\n  computed: {\r\n    getFilteredItems() {\r\n      return this.items.filter(\r\n        item => this.compareFields.some(\r\n          field => this.compareItems.includes(item[field])\r\n        )\r\n      )\r\n    },\r\n  },\r\n\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./entries.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./entries.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./entries.vue?vue&type=template&id=12e108ba&\"\nimport script from \"./entries.vue?vue&type=script&lang=js&\"\nexport * from \"./entries.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.getOpEntry.length)?[_c('h2',{staticClass:\"mb-3\"},[_vm._v(\"Проводки\")]),_c('div',{staticClass:\"d-flex\"},[_c('b-button',{staticClass:\"ml-auto\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.addItem('opEntry')}}},[_vm._v(\"Добавить запись\")])],1),_c('b-table',{staticClass:\"mb-5 mt-3\",attrs:{\"fields\":_vm.fields,\"items\":_vm.getOpEntry,\"select-mode\":\"single\",\"selectable\":\"\"},on:{\"row-selected\":function($event){return _vm.onRowSelected($event, [ 'AcctNumCr', 'AcctNumDb' ])}},scopedSlots:_vm._u([{key:\"table-colgroup\",fn:function(scope){return _vm._l((scope.fields),function(field){return _c('col',{key:field.key,style:({ \n            width: field.key === 'action' ? '230px' : '',\n          })})})}},{key:\"cell(action)\",fn:function(data){return [_c('action-buttons',{attrs:{\"store-name\":\"opEntry\",\"item-id\":data.item.id,\"fields-for-edit\":['OpDate','AcctNumDb','AcctNumCr','Amount']}})]}}],null,false,1288630940)}),_c('entries',{attrs:{\"header\":\"Счета проводок\",\"compare-items\":_vm.selectedEntry,\"compare-fields\":['AcctNum'],\"fields\":_vm.entryFields,\"items\":_vm.getFilteredEntryItems}})]:[_c('h2',{staticClass:\"mb-3\"},[_vm._v(\"Нет данных\")])]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <template v-if=\"getOpEntry.length\">\r\n      <h2 class=\"mb-3\" >Проводки</h2>\r\n\r\n      <div class=\"d-flex\">\r\n        <b-button\r\n          class=\"ml-auto\"\r\n          variant=\"primary\"\r\n          @click=\"addItem('opEntry')\"\r\n        >Добавить запись</b-button>\r\n      </div>\r\n\r\n      <b-table\r\n        :fields=\"fields\"\r\n        :items=\"getOpEntry\"\r\n        select-mode='single'\r\n        selectable\r\n        @row-selected=\"onRowSelected($event, [ 'AcctNumCr', 'AcctNumDb' ])\"\r\n        class=\"mb-5 mt-3\"\r\n      >\r\n        <template #table-colgroup=\"scope\">\r\n          <col\r\n            v-for=\"field in scope.fields\"\r\n            :key=\"field.key\"\r\n            :style=\"{ \r\n              width: field.key === 'action' ? '230px' : '',\r\n            }\"\r\n          >\r\n        </template>\r\n        <template #cell(action)=\"data\">\r\n          <action-buttons\r\n            store-name=\"opEntry\"\r\n            :item-id=\"data.item.id\"\r\n            :fields-for-edit=\"['OpDate','AcctNumDb','AcctNumCr','Amount']\"\r\n          />\r\n        </template>\r\n      </b-table>\r\n\r\n      <entries\r\n        header=\"Счета проводок\"\r\n        :compare-items=\"selectedEntry\"\r\n        :compare-fields=\"['AcctNum']\"\r\n        :fields=\"entryFields\"\r\n        :items=\"getFilteredEntryItems\"\r\n      />\r\n    </template>\r\n    <template v-else>\r\n      <h2 class=\"mb-3\" >Нет данных</h2>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Entries from \"@/components/entries\"\r\nimport ActionButtons from \"@/components/action-buttons\"\r\nimport MixinsLocals from \"@/mixins/locals\"\r\nimport { mapGetters, mapActions } from \"vuex\"\r\nexport default {\r\n  name: \"Operations\",\r\n  components: {\r\n    Entries,\r\n    ActionButtons,\r\n  },\r\n  mixins: [ MixinsLocals ],\r\n  data() {\r\n    return {\r\n      fields: [\r\n        {\r\n          key: 'OpDate',\r\n          label: 'Дата',\r\n        },\r\n        {\r\n          key: 'AcctNumDb',\r\n          label: 'Счет дебета',\r\n        },\r\n        {\r\n          key: 'AcctNumCr',\r\n          label: 'Счет кредита',\r\n        },\r\n        {\r\n          key: 'Amount',\r\n          label: 'Сумма',\r\n        },\r\n        {\r\n          key: 'action',\r\n          label: 'Действие',\r\n        },\r\n      ],\r\n\r\n      entryFields: [\r\n        {\r\n          key: 'AcctNum',\r\n          label: 'Номер счета',\r\n        },\r\n        {\r\n          key: 'Balance',\r\n          label: 'Остаток',\r\n        },\r\n      ],\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([ 'getOpEntry', 'getAcctPos' ]),\r\n\r\n    // получаем по одной записи по каждому счету (в нашем случае только 2 записи)\r\n    getFilteredEntryItems() {\r\n      return this.getAcctPos.reduce((acc, item) => {\r\n        const itemInIndex = acc.findIndex(itemIn => itemIn.AcctNum === item.AcctNum)\r\n        if (itemInIndex != -1) {\r\n          acc[itemInIndex].Balance += item.Balance\r\n        } else {\r\n          acc.push(item)\r\n        }\r\n\r\n        return acc\r\n      }, [])\r\n    },\r\n  },\r\n\r\n  async created() {\r\n    await this.loadFile('opEntry')\r\n    await this.loadFile('acctPos')\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([ 'loadFile' ]),\r\n  },\r\n\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Operations.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Operations.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Operations.vue?vue&type=template&id=66055b0f&\"\nimport script from \"./Operations.vue?vue&type=script&lang=js&\"\nexport * from \"./Operations.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}